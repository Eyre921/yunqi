# 样式方案

<cite>
**本文档引用的文件**   
- [tailwind.config.js](file://tailwind.config.js)
- [globals.css](file://src/app/globals.css)
- [ThemeContext.tsx](file://src/contexts/ThemeContext.tsx)
- [ThemeToggle.tsx](file://src/components/ThemeToggle.tsx)
</cite>

## 目录
1. [全局样式配置](#全局样式配置)
2. [Tailwind 主题扩展](#tailwind-主题扩展)
3. [暗色模式切换机制](#暗色模式切换机制)
4. [响应式与间距体系](#响应式与间距体系)
5. [颜色与动画系统](#颜色与动画系统)
6. [样式优先级与冲突处理](#样式优先级与冲突处理)

## 全局样式配置

项目通过 `globals.css` 文件集中管理全局样式，采用模块化设计，包含基础重置、自定义滚动条、无障碍支持和工具类。文件以 `@tailwind` 指令引入 Tailwind 的 base、components 和 utilities 层，确保样式层级清晰。通过 CSS 变量 `:root` 和 `.dark` 类定义了浅色与深色模式下的主题色，如 `--toast-bg` 和 `--toast-color`，为 Toast 组件提供统一的视觉基础。

全局样式还包含文本截断（`.line-clamp-*`）、焦点样式、选择文本样式等通用规则，并通过 `@media` 查询支持高对比度模式和减少动画偏好，提升可访问性。打印样式（`@media print`）确保页面在打印时隐藏非必要元素并恢复默认背景色。

**Section sources**
- [globals.css](file://src/app/globals.css#L0-L72)

## Tailwind 主题扩展

`tailwind.config.js` 文件通过 `theme.extend` 扩展了默认主题，主要添加了自定义动画。配置中定义了 `marquee` 和 `marquee-reverse` 两种传送带动画，使用 `keyframes` 指定从 `translateX(0%)` 到 `translateX(-50%)` 的平移变换，实现无缝循环滚动效果。动画时长通过 CSS 变量 `--marquee-duration` 控制，默认为 30 秒，提供了灵活的时长调整能力。

此外，项目通过 `content` 字段指定了 Tailwind 扫描的文件路径，确保所有位于 `src/pages`、`src/components` 和 `src/app` 目录下的文件中的类名都能被正确生成。插件 `@tailwindcss/line-clamp` 被启用，以支持 `-webkit-line-clamp` 文本截断功能。

**Section sources**
- [tailwind.config.js](file://tailwind.config.js#L1-L25)

## 暗色模式切换机制

暗色模式的实现依赖于 `ThemeContext` 状态管理和 `ThemeToggle` 组件的交互。`ThemeContext.tsx` 使用 React Context API 创建 `ThemeProvider`，内部通过 `useState` 管理 `theme` 状态（`light` 或 `dark`）。组件挂载时，会从 `localStorage` 读取用户偏好，若无记录则根据 `prefers-color-scheme` 媒体查询获取系统偏好。

`toggleTheme` 函数用于切换主题，它会更新状态、将选择持久化到 `localStorage`，并通过 `document.documentElement.classList.toggle('dark', ...)` 将 `dark` 类名动态注入 DOM 根元素。`ThemeToggle` 组件通过 `useTheme` Hook 订阅上下文，渲染一个按钮，点击时触发 `toggleTheme`。按钮内部使用 SVG 图标（太阳和月亮），并通过 Tailwind 的条件类名（如 `theme === 'light' ? 'opacity-100' : 'opacity-0'`）和 CSS 过渡实现平滑的图标切换动画。

**Section sources**
- [ThemeContext.tsx](file://src/contexts/ThemeContext.tsx#L0-L77)
- [ThemeToggle.tsx](file://src/components/ThemeToggle.tsx#L10-L74)

## 响应式与间距体系

项目采用移动优先的响应式设计。`globals.css` 中定义了多个响应式工具类，如 `.responsive-grid` 在桌面端创建多列网格，在移动端退化为单列。针对不同设备，提供了 `.mobile-*`、`.tablet-*` 和 `.desktop-*` 系列类名，用于控制内边距、字体大小、网格列数和显示属性，确保在不同屏幕尺寸下都有良好的布局表现。

间距体系主要依赖于 Tailwind 内置的 `margin` 和 `padding` 类（如 `p-4`, `m-2`），并在 `globals.css` 中通过 `@media` 查询进行覆盖或补充。例如，`.mobile-padding` 在移动端设置 `1rem` 的左右内边距，而 `.desktop-padding` 在桌面端设置 `3rem`，实现了不同断点下的统一间距规范。

**Section sources**
- [globals.css](file://src/app/globals.css#L242-L318)

## 颜色与动画系统

颜色体系通过 `globals.css` 中的 `:root` 和 `.dark` 变量以及 Tailwind 的默认调色板共同构成。项目利用 CSS 变量实现了主题色的动态切换，并在按钮、输入框、模态框等组件的深色模式样式中引用这些变量。同时，定义了 `.gradient-bg`、`.gradient-text` 等渐变工具类，增强视觉表现力。

动画系统包含两部分：一是通过 `tailwind.config.js` 扩展的 `marquee` 传送带动画；二是 `globals.css` 中定义的多种 CSS 动画，如 `spin`、`pulse`、`bounce`、`fadeIn` 等。这些动画被封装为 `.animate-*` 工具类（如 `.animate-spin`、`.animate-fadeIn`），可直接在组件中使用。项目还通过 `@media (prefers-reduced-motion: reduce)` 查询，为偏好减少动画的用户提供无障碍支持，将所有动画禁用。

**Section sources**
- [tailwind.config.js](file://tailwind.config.js#L1-L25)
- [globals.css](file://src/app/globals.css#L129-L195)

## 样式优先级与冲突处理

项目遵循 Tailwind CSS 的原子化设计原则，通过类名的组合来应用样式，从根本上减少了 CSS 选择器的复杂性和特异性冲突。当需要覆盖 Tailwind 样式时，通常采用以下策略：

1.  **后定义优先**：由于 `@tailwind utilities` 在 `globals.css` 中最后引入，后续在文件中定义的自定义样式会自然覆盖同名的 Tailwind 工具类。
2.  **!important**：对于极少数需要强制覆盖的情况，使用 `!important`（如 `scroll-behavior: auto !important`）。
3.  **组件内联样式**：在极特殊情况下，可使用 React 的 `style` 属性，但项目中应尽量避免。
4.  **CSS 变量**：通过定义 CSS 变量，可以在不同主题或状态下动态改变样式，避免编写重复的类名。

通过 `globals.css` 的模块化组织和 Tailwind 的原子化特性，项目有效地管理了样式优先级，确保了样式的可预测性和可维护性。

**Section sources**
- [globals.css](file://src/app/globals.css#L0-L583)
- [tailwind.config.js](file://tailwind.config.js#L1-L25)