# ä½œå“å¡ç‰‡ç»„ä»¶

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨æ–‡ä»¶**  
- [WorkCard.tsx](file://src/components/WorkCard.tsx#L7-L92)
- [work.d.ts](file://src/types/work.d.ts#L3-L9)
- [WorkMarquee.tsx](file://src/components/WorkMarquee.tsx#L1-L59)
- [InfiniteScrollWorks.tsx](file://src/components/InfiniteScrollWorks.tsx#L1-L267)
- [image-url.ts](file://src/lib/image-url.ts#L1-L95)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [æ ¸å¿ƒåŠŸèƒ½ä¸è®¾è®¡](#æ ¸å¿ƒåŠŸèƒ½ä¸è®¾è®¡)
3. [ä½œå“å¯¹è±¡ç»“æ„](#ä½œå“å¯¹è±¡ç»“æ„)
4. [äº¤äº’æœºåˆ¶](#äº¤äº’æœºåˆ¶)
5. [å†…éƒ¨çŠ¶æ€ç®¡ç†](#å†…éƒ¨çŠ¶æ€ç®¡ç†)
6. [UIä¸åŠ¨ç”»å®ç°](#uiä¸åŠ¨ç”»å®ç°)
7. [ç²¾é€‰å¾½ç« æ¸²æŸ“é€»è¾‘](#ç²¾é€‰å¾½ç« æ¸²æŸ“é€»è¾‘)
8. [äº‹ä»¶å†’æ³¡æ§åˆ¶](#äº‹ä»¶å†’æ³¡æ§åˆ¶)
9. [é›†æˆä½¿ç”¨ç¤ºä¾‹](#é›†æˆä½¿ç”¨ç¤ºä¾‹)
10. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)

## ç®€ä»‹
`WorkCard` æ˜¯æ•°å­—åŒ–ä½œå“äº’åŠ¨å±•ç¤ºå¹³å°ä¸­çš„æ ¸å¿ƒUIå•å…ƒï¼Œç”¨äºç»Ÿä¸€å±•ç¤ºæ¯ä¸€ä»¶ç”¨æˆ·ä¸Šä¼ çš„ä½œå“ã€‚è¯¥ç»„ä»¶è®¾è®¡ç®€æ´ã€å“åº”å¼è‰¯å¥½ï¼Œæ”¯æŒå›¾ç‰‡æ‡’åŠ è½½ã€é”™è¯¯å›é€€ã€æ‚¬åœåŠ¨ç”»åŠç²¾é€‰æ ‡è¯†ç­‰ç‰¹æ€§ï¼Œå¹¿æ³›åº”ç”¨äºä½œå“æµã€è½®æ’­å±•ç¤ºå’Œæ— é™æ»šåŠ¨ç­‰åœºæ™¯ã€‚

**Section sources**
- [WorkCard.tsx](file://src/components/WorkCard.tsx#L7-L92)

## æ ¸å¿ƒåŠŸèƒ½ä¸è®¾è®¡
`WorkCard` ç»„ä»¶ä½œä¸ºä½œå“å±•ç¤ºçš„åŸºæœ¬å•å…ƒï¼Œæ‰¿æ‹…äº†è§†è§‰å‘ˆç°ä¸ç”¨æˆ·äº¤äº’çš„åŒé‡èŒè´£ã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€è‡´ã€ç¾è§‚ä¸”é«˜æ€§èƒ½çš„ä½œå“å¡ç‰‡è§†å›¾ï¼Œæ”¯æŒåœ¨å¤šç§å¸ƒå±€ä¸­å¤ç”¨ï¼Œå¦‚æ¨ªå‘æ»šåŠ¨ï¼ˆ`WorkMarquee`ï¼‰å’Œå‚ç›´æ— é™åŠ è½½ï¼ˆ`InfiniteScrollWorks`ï¼‰ã€‚

ç»„ä»¶é‡‡ç”¨å‡½æ•°å¼ç»„ä»¶ä¸React Hookså®ç°ï¼Œç»“åˆNext.jsçš„`Image`ç»„ä»¶è¿›è¡Œå›¾ç‰‡ä¼˜åŒ–ï¼Œå¹¶é€šè¿‡Tailwind CSSå®ç°ç°ä»£åŒ–çš„å“åº”å¼æ ·å¼ä¸äº¤äº’åŠ¨ç”»ã€‚

**Section sources**
- [WorkCard.tsx](file://src/components/WorkCard.tsx#L7-L92)

## ä½œå“å¯¹è±¡ç»“æ„
`WorkCard` æ¥æ”¶ä¸€ä¸ª `work` å¯¹è±¡ä½œä¸ºæ ¸å¿ƒæ•°æ®æºï¼Œå…¶ç±»å‹å®šä¹‰ä¸º `WorkWithUser`ï¼Œæ‰©å±•è‡ªPrismaç”Ÿæˆçš„`Work`æ¨¡å‹ï¼Œå¹¶åŒ…å«å…³è”çš„ç”¨æˆ·ä¿¡æ¯ã€‚

è¯¥å¯¹è±¡åŒ…å«ä»¥ä¸‹å…³é”®å­—æ®µï¼š

| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| `name` | string | ä½œå“åç§° |
| `author` | string | ä½œè€…åç§°ï¼ˆå¯ä¸ºç©ºï¼‰ |
| `imageUrl` | string | ä½œå“å›¾ç‰‡URL |
| `likeCount` | number | ç‚¹èµæ•° |
| `viewCount` | number | æµè§ˆé‡ |
| `featured` | boolean | æ˜¯å¦ä¸ºç²¾é€‰ä½œå“ |

**Section sources**
- [work.d.ts](file://src/types/work.d.ts#L3-L9)

## äº¤äº’æœºåˆ¶
ç»„ä»¶é€šè¿‡ä¸¤ä¸ªå¯é€‰å›è°ƒå‡½æ•°å®ç°äº¤äº’ï¼š

- `onClick`: ç‚¹å‡»å¡ç‰‡æ—¶è§¦å‘ï¼Œé€šå¸¸ç”¨äºæ‰“å¼€ä½œå“è¯¦æƒ…æ¨¡æ€æ¡†ã€‚
- `onLike`: ç‚¹å‡»ç‚¹èµæŒ‰é’®æ—¶è§¦å‘ï¼Œç”¨äºæ›´æ–°ç‚¹èµçŠ¶æ€ã€‚

è¿™ä¸¤ä¸ªå›è°ƒé€šè¿‡Propsä¼ é€’ï¼Œç¡®ä¿ç»„ä»¶çš„é«˜å†…èšä¸ä½è€¦åˆï¼Œä¾¿äºåœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­å¤ç”¨ã€‚

```mermaid
sequenceDiagram
participant ç”¨æˆ·
participant WorkCard
participant çˆ¶ç»„ä»¶
ç”¨æˆ·->>WorkCard : ç‚¹å‡»å¡ç‰‡
WorkCard->>çˆ¶ç»„ä»¶ : è°ƒç”¨ onClick å›è°ƒ
ç”¨æˆ·->>WorkCard : ç‚¹å‡»ç‚¹èµæŒ‰é’®
WorkCard->>çˆ¶ç»„ä»¶ : è°ƒç”¨ onLike å›è°ƒ
```

**Diagram sources**
- [WorkCard.tsx](file://src/components/WorkCard.tsx#L7-L92)

## å†…éƒ¨çŠ¶æ€ç®¡ç†
ç»„ä»¶ä½¿ç”¨ `useState` ç®¡ç†ä¸¤ä¸ªå…³é”®å›¾ç‰‡åŠ è½½çŠ¶æ€ï¼š

- `imageLoaded`: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå›¾ç‰‡æ˜¯å¦å·²æˆåŠŸåŠ è½½ã€‚
- `imageError`: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå›¾ç‰‡åŠ è½½æ˜¯å¦å‡ºé”™ã€‚

é€šè¿‡ `onLoad` å’Œ `onError` äº‹ä»¶ç›‘å¬ï¼ŒåŠ¨æ€æ›´æ–°çŠ¶æ€ï¼Œå®ç°åŠ è½½åŠ¨ç”»ã€æˆåŠŸæ˜¾ç¤ºä¸é”™è¯¯å›é€€çš„ä¸‰æ€åˆ‡æ¢ã€‚

```mermaid
stateDiagram-v2
[*] --> åˆå§‹çŠ¶æ€
åˆå§‹çŠ¶æ€ --> åŠ è½½ä¸­ : å›¾ç‰‡å¼€å§‹åŠ è½½
åŠ è½½ä¸­ --> åŠ è½½æˆåŠŸ : onLoad è§¦å‘
åŠ è½½ä¸­ --> åŠ è½½å¤±è´¥ : onError è§¦å‘
åŠ è½½æˆåŠŸ --> æ˜¾ç¤ºå›¾ç‰‡
åŠ è½½å¤±è´¥ --> æ˜¾ç¤ºé”™è¯¯å ä½å›¾
```

**Diagram sources**
- [WorkCard.tsx](file://src/components/WorkCard.tsx#L7-L92)

## UIä¸åŠ¨ç”»å®ç°
ç»„ä»¶ä½¿ç”¨Tailwind CSSå®ç°ç°ä»£åŒ–UIä¸æµç•…åŠ¨ç”»æ•ˆæœï¼š

- **æ‚¬åœç¼©æ”¾**: ä½¿ç”¨ `hover:scale-105` å®ç°å¡ç‰‡æ‚¬åœæ—¶è½»å¾®æ”¾å¤§ã€‚
- **é˜´å½±è¿‡æ¸¡**: ä½¿ç”¨ `hover:shadow-xl` å’Œ `transition-all duration-300` å®ç°é˜´å½±åŠ¨æ€å¢å¼ºã€‚
- **åœ†è§’ä¸è¾¹æ¡†**: ä½¿ç”¨ `rounded-lg` å’Œ `overflow-hidden` ç¡®ä¿è§†è§‰ä¸€è‡´æ€§ã€‚
- **æš—è‰²æ¨¡å¼æ”¯æŒ**: ä½¿ç”¨ `dark:` å‰ç¼€ç±»å®ç°æ·±è‰²ä¸»é¢˜é€‚é…ã€‚

```mermaid
flowchart TD
A[é¼ æ ‡è¿›å…¥å¡ç‰‡] --> B{è§¦å‘ hover}
B --> C[åº”ç”¨ hover:scale-105]
B --> D[åº”ç”¨ hover:shadow-xl]
C --> E[è§†è§‰æ”¾å¤§ 1.05 å€]
D --> F[é˜´å½±å¢å¼º]
E --> G[æå‡è§†è§‰ç„¦ç‚¹]
F --> G
```

**Diagram sources**
- [WorkCard.tsx](file://src/components/WorkCard.tsx#L21)

## ç²¾é€‰å¾½ç« æ¸²æŸ“é€»è¾‘
å½“ `work.featured` ä¸º `true` æ—¶ï¼Œç»„ä»¶æ¡ä»¶æ¸²æŸ“ä¸€ä¸ªç²¾é€‰å¾½ç« ï¼š

- ä½ç½®ï¼šå³ä¸Šè§’ç»å¯¹å®šä½ï¼ˆ`absolute top-2 right-2`ï¼‰ã€‚
- æ ·å¼ï¼šæ¸å˜èƒŒæ™¯ï¼ˆ`from-yellow-400 to-orange-500`ï¼‰ã€ç™½è‰²æ–‡å­—ã€åœ†è§’æ ‡ç­¾ã€‚
- å†…å®¹ï¼šåŒ…å«â­å›¾æ ‡ä¸â€œç²¾é€‰â€æ–‡å­—ã€‚

è¯¥å¾½ç« ä½¿ç”¨ `z-10` ç¡®ä¿å±‚çº§é«˜äºå›¾ç‰‡ï¼Œæå‡è§†è§‰è¯†åˆ«åº¦ã€‚

```mermaid
flowchart LR
A[åˆ¤æ–­ work.featured] --> B{ä¸º true?}
B --> |æ˜¯| C[æ¸²æŸ“ç²¾é€‰å¾½ç« ]
B --> |å¦| D[ä¸æ¸²æŸ“]
```

**Diagram sources**
- [WorkCard.tsx](file://src/components/WorkCard.tsx#L24-L31)

## äº‹ä»¶å†’æ³¡æ§åˆ¶
ç‚¹èµæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶é€šè¿‡ `handleLikeClick` å¤„ç†ï¼š

```ts
const handleLikeClick = (e: React.MouseEvent) => {
  e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡è‡³çˆ¶çº§onClick
  onLike?.();
};
```

æ­¤è®¾è®¡ç¡®ä¿ç‚¹å‡»ç‚¹èµæŒ‰é’®æ—¶ä»…è§¦å‘ç‚¹èµé€»è¾‘ï¼Œä¸ä¼šåŒæ—¶è§¦å‘å¡ç‰‡æ•´ä½“çš„ `onClick` äº‹ä»¶ï¼Œé¿å…è¯¯æ“ä½œã€‚

**Section sources**
- [WorkCard.tsx](file://src/components/WorkCard.tsx#L13-L16)

## é›†æˆä½¿ç”¨ç¤ºä¾‹
`WorkCard` é€šå¸¸åµŒå¥—åœ¨æ›´é«˜é˜¶ç»„ä»¶ä¸­ä½¿ç”¨ï¼š

### ä¸ `WorkMarquee` é›†æˆ
`WorkMarquee` å®ç°æ¨ªå‘æ»šåŠ¨ä½œå“æµï¼Œå†…éƒ¨éå† `works` æ•°ç»„å¹¶ä¸ºæ¯ä¸ªä½œå“æ¸²æŸ“ `WorkCard`ã€‚

```tsx
<WorkMarquee 
  works={works} 
  onWorkClick={handleWorkClick}
/>
```

### ä¸ `InfiniteScrollWorks` é›†æˆ
`InfiniteScrollWorks` å®ç°å‚ç›´æ— é™æ»šåŠ¨ï¼Œå†…éƒ¨å°†ä½œå“åˆ†ç»„ä¸ºå¤šè¡Œï¼Œæ¯è¡Œä½¿ç”¨ `WorkMarquee` æ¸²æŸ“ï¼Œå½¢æˆç½‘æ ¼æ»šåŠ¨æ•ˆæœã€‚

```tsx
<InfiniteScrollWorks 
  onWorkClick={handleWorkClick}
  worksPerRow={8}
/>
```

```mermaid
graph TB
A[InfiniteScrollWorks] --> B[åˆ†é¡µåŠ è½½ä½œå“]
B --> C[æŒ‰è¡Œåˆ†ç»„]
C --> D[æ¯è¡Œæ¸²æŸ“ WorkMarquee]
D --> E[æ¯ä¸ª WorkMarquee æ¸²æŸ“å¤šä¸ª WorkCard]
E --> F[ç”¨æˆ·äº¤äº’]
```

**Diagram sources**
- [WorkMarquee.tsx](file://src/components/WorkMarquee.tsx#L1-L59)
- [InfiniteScrollWorks.tsx](file://src/components/InfiniteScrollWorks.tsx#L1-L267)

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
ç»„ä»¶åœ¨å¤šä¸ªå±‚é¢è¿›è¡Œäº†æ€§èƒ½ä¼˜åŒ–ï¼š

### å›¾ç‰‡æ‡’åŠ è½½
é€šè¿‡ `sizes` å±æ€§é…åˆå“åº”å¼æ–­ç‚¹ï¼Œç¡®ä¿ä¸åŒè®¾å¤‡åŠ è½½åˆé€‚å°ºå¯¸çš„å›¾ç‰‡ï¼Œå‡å°‘å¸¦å®½æ¶ˆè€—ã€‚

### é”™è¯¯å¤„ç†ä¸å›é€€
- å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå ä½å›¾ï¼ˆğŸ–¼ï¸ + â€œå›¾ç‰‡åŠ è½½å¤±è´¥â€ï¼‰ã€‚
- åŠ è½½ä¸­æ˜¾ç¤ºæ—‹è½¬åŠ¨ç”»ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

### å›¾ç‰‡URLå¤„ç†
é€šè¿‡ `getImageUrl` å·¥å…·å‡½æ•°ç»Ÿä¸€å¤„ç†å¤šç§å›¾ç‰‡æ¥æºï¼ˆæœ¬åœ°ã€OSSã€Cloudinaryç­‰ï¼‰ï¼Œç¡®ä¿URLæ ¼å¼æ­£ç¡®ã€‚

```mermaid
flowchart TD
A[åŸå§‹ imageUrl] --> B{æ˜¯å¦ä¸ºå®Œæ•´URL?}
B --> |æ˜¯| C[ç›´æ¥ä½¿ç”¨]
B --> |å¦| D{æ˜¯å¦ä¸ºæœ¬åœ°è·¯å¾„?}
D --> |æ˜¯| E[æ·»åŠ  / å‰ç¼€]
D --> |å¦| F[å°è¯•æ„é€  OSS URL]
F --> G[è¿”å›å¤„ç†åURL]
```

**Diagram sources**
- [image-url.ts](file://src/lib/image-url.ts#L1-L95)